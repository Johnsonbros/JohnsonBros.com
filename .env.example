# Johnson Bros Plumbing - Environment Configuration
# =====================================================
# This file contains all environment variables used by the application.
# Copy this file to .env and fill in the values for your environment.
# NEVER commit the actual .env file to version control.

# =====================================================
# REQUIRED - Core Configuration
# =====================================================

# Database Configuration (Required)
# PostgreSQL connection string from Neon or your database provider
DATABASE_URL=postgresql://username:password@host:5432/database_name

# HousecallPro API Configuration (Required for core functionality)
# Get your API key from HousecallPro dashboard: Settings > Integrations > API
HOUSECALL_PRO_API_KEY=Bearer your_api_key_here
# Alternative: Use company API key
# HCP_COMPANY_API_KEY=Token your_company_api_key

# Session Security (Required in production)
# Generate with: openssl rand -base64 32
SESSION_SECRET=your-secure-session-secret-here-min-32-chars

# =====================================================
# REQUIRED - Third-Party Services
# =====================================================

# Google Maps API Key (Required for maps and location features)
# Get from: https://console.cloud.google.com/google/maps-apis
GOOGLE_MAPS_API_KEY=your_google_maps_api_key
# Frontend-specific Google Maps key (if different from server)
VITE_GOOGLE_MAPS_API_KEY=your_frontend_google_maps_key

# =====================================================
# OPTIONAL - Communication Services
# =====================================================

# Twilio Configuration (Optional - for SMS notifications)
# Get from: https://console.twilio.com/
TWILIO_ACCOUNT_SID=AC...
TWILIO_AUTH_TOKEN=your_auth_token
TWILIO_PHONE_NUMBER=+1234567890
# Optional: Sender name override for OTP messages
OTP_SENDER_NAME=Johnson Bros
# Optional: Specific notification numbers
TWILIO_NOTIFY_TECH_PHONE=+1234567890
TWILIO_NOTIFY_ADMIN_PHONE=+1234567890

# OpenAI/ChatKit Configuration (Optional - for AI assistant)
OPENAI_API_KEY=sk-your-openai-key

# Default phone region (Optional - used for phone normalization)
DEFAULT_REGION=US

# =====================================================
# OPTIONAL - Google Services
# =====================================================

# Google Places API (Optional - for location autocomplete)
GOOGLE_PLACES_API_KEY=your_google_places_api_key

# Google Ads Configuration (Optional - for ads automation)
# Get from Google Ads API Console
GOOGLE_ADS_CLIENT_ID=1234567890
GOOGLE_ADS_CLIENT_SECRET=your_client_secret
GOOGLE_ADS_DEVELOPER_TOKEN=your_developer_token
GOOGLE_ADS_CUSTOMER_ID=1234567890
# Legacy naming (deprecated - use above instead)
GOOGLE_ADS_DEV_TOKEN=
GOOGLE_ADS_REFRESH_TOKEN=
GOOGLE_ADS_MANAGER_ID=
GOOGLE_ADS_ACCOUNT_ID=
# Optional: Specific campaign IDs
GOOGLE_ADS_BRAND_CAMPAIGN_ID=123456789
GOOGLE_ADS_DISCOVERY_CAMPAIGN_ID=987654321

# =====================================================
# OPTIONAL - Google Search Console (SEO Monitoring)
# =====================================================

# Google Search Console API Configuration
# Required for SEO monitoring dashboard
# Create a service account in Google Cloud Console and add it to Search Console
GOOGLE_SERVICE_ACCOUNT_EMAIL=your-service-account@project.iam.gserviceaccount.com
GOOGLE_SERVICE_ACCOUNT_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----\n"
GOOGLE_SEARCH_CONSOLE_SITE_URL=https://johnsonbrosplumbing.com/
# Optional: Old site URL for migration comparison
GOOGLE_SEARCH_CONSOLE_OLD_SITE_URL=https://www.thejohnsonbros.com/

# =====================================================
# OPTIONAL - Google Analytics 4 (SEO Monitoring)
# =====================================================

# Google Analytics 4 API Configuration
# Required for SEO monitoring dashboard traffic data
# Use the same service account or create a separate one
GA4_PROPERTY_ID=123456789
GA4_SERVICE_ACCOUNT_EMAIL=your-service-account@project.iam.gserviceaccount.com
GA4_SERVICE_ACCOUNT_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----\n"

# =====================================================
# OPTIONAL - Google My Business (GMB/Business Profile)
# =====================================================

# Google My Business API Configuration
# For auto-posting to GMB, responding to reviews, and photo management
# Create a service account and enable the My Business API
# Note: GMB API requires OAuth2 for most operations - service accounts work with domain-wide delegation
GMB_SERVICE_ACCOUNT_EMAIL=your-service-account@project.iam.gserviceaccount.com
GMB_SERVICE_ACCOUNT_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----\n"
# Your GMB account ID (found in Business Profile Manager URL)
GMB_ACCOUNT_ID=123456789012345678
# Your GMB location ID (found in Business Profile Manager URL)
GMB_LOCATION_ID=12345678901234567890

# =====================================================
# OPTIONAL - Admin Configuration
# =====================================================

# Super Admin Account (Optional - for initial setup)
# If not set, defaults will be used in development
SUPER_ADMIN_EMAIL=admin@example.com
SUPER_ADMIN_PASSWORD=secure_password_here
SUPER_ADMIN_NAME=Admin User
# Alternative individual name fields
# ADMIN_EMAIL=admin@example.com
# ADMIN_DEFAULT_PASSWORD=change_this_secure_password_123!
# ADMIN_FIRST_NAME=John
# ADMIN_LAST_NAME=Doe

# =====================================================
# OPTIONAL - Security & CORS
# =====================================================

# CORS Configuration (Optional - defaults to allowing all in dev)
# Comma-separated list of allowed origins for production
CORS_ORIGIN=https://yourdomain.com,https://www.yourdomain.com

# Cookie Security (Optional)
COOKIE_DOMAIN=.yourdomain.com
SECURE_COOKIES=true
SESSION_DURATION=86400000  # Session duration in ms (default: 24 hours)
TRUST_PROXY=true  # Set to true when behind a proxy (e.g., Cloudflare, nginx)

# Internal API Security (Optional - for server-to-server calls)
# Generate with: openssl rand -hex 32
INTERNAL_SECRET=your_internal_api_secret_here
# Internal admin token for debug endpoints
INTERNAL_ADMIN_TOKEN=your_internal_admin_token_here

# =====================================================
# OPTIONAL - Webhooks
# =====================================================

# HousecallPro Webhook Configuration (Optional but recommended)
# Generate with: openssl rand -hex 32
HOUSECALL_WEBHOOK_SECRET=your_webhook_signature_secret
# Custom webhook URL (if different from auto-detected)
WEBHOOK_URL=https://yourdomain.com/api/webhooks/housecall

# =====================================================
# OPTIONAL - Site Configuration
# =====================================================

# Site URL (Optional - used for sitemap, canonical URLs, etc.)
# If not set, will be auto-detected from request headers
SITE_URL=https://yourdomain.com

# Company Configuration (Optional)
COMPANY_TZ=America/New_York
HOUSECALL_COMPANY_ID=com_abc123
DEFAULT_DISPATCH_EMPLOYEE_IDS=emp_123,emp_456,emp_789

# =====================================================
# OPTIONAL - Development & Debugging
# =====================================================

# Node Environment (auto-set by hosting platform)
NODE_ENV=production  # or 'development'

# Application Version (Optional)
APP_VERSION=1.0.0

# Logging Configuration (Optional)
LOG_LEVEL=info  # Options: debug, info, warn, error
DEBUG_LOGS=false  # Set to true for verbose logging in production

# MCP Server Port (Optional - for Model Context Protocol)
MCP_PORT=3001

# =====================================================
# OPTIONAL - API Configuration
# =====================================================

# HousecallPro API Base URL (Optional - defaults to production)
HCP_API_BASE=https://api.housecallpro.com

# =====================================================
# OPTIONAL - Monitoring Services
# =====================================================

# Sentry Error Tracking (Optional but recommended for production)
# Get from: https://sentry.io/settings/projects/YOUR_PROJECT/keys/
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
# Frontend-specific Sentry DSN (can be same as backend or different project)
VITE_SENTRY_DSN=https://your-frontend-sentry-dsn@sentry.io/project-id

# Sentry Debug Mode (set to 'true' to enable in development)
# When enabled, logs computed tracePropagationTargets and sends events in dev
VITE_SENTRY_DEBUG=false

# Sentry Trace Propagation - Domain Configuration
# Your production domain (without protocol). Used to build regex for tracing.
# Supports root domain and all subdomains (e.g., api.thejohnsonbros.com)
VITE_PUBLIC_APP_DOMAIN=thejohnsonbros.com

# Optional: External API origin for trace propagation
# Use this if your API is on a different origin (e.g., separate Replit app)
# Example: https://api.thejohnsonbros.com or https://your-api.replit.app
VITE_API_ORIGIN=

# Sentry Sample Rates (Optional)
VITE_SENTRY_SAMPLE_RATE=1.0
VITE_SENTRY_TRACES_SAMPLE_RATE=0.1

# Application Monitoring (Optional)
NEW_RELIC_LICENSE_KEY=your_new_relic_key
LOGTAIL_SOURCE_TOKEN=your_logtail_token

# =====================================================
# PLATFORM-SPECIFIC (Auto-set by Hosting Platform)
# =====================================================

# These are automatically set by hosting platforms - DO NOT SET MANUALLY
# PORT=5000  # Set by Replit, Heroku, etc.
# REPL_ID=...  # Replit specific
# REPL_SLUG=...  # Replit specific
# REPL_OWNER=...  # Replit specific

# =====================================================
# NOTES & BEST PRACTICES
# =====================================================
# 
# 1. SECURITY: Never commit real credentials to version control
# 2. SECRETS: Use strong, randomly generated secrets for production
#    - Generate secrets: openssl rand -hex 32
#    - Generate passwords: openssl rand -base64 32
# 3. KEYS: Store API keys securely and rotate them regularly
# 4. URLS: Always use HTTPS URLs in production
# 5. VALIDATION: The app will validate required variables on startup
# 6. FALLBACKS: Many variables have sensible defaults for development
# 7. DOCUMENTATION: See DEPLOYMENT.md for detailed setup instructions
#
# =====================================================
